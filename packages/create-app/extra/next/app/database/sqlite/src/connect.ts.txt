
import Database from "better-sqlite3";
import path from "path";

if (!process.env.DATABASE_FILE) {
  throw new Error("Please define the DATABASE_FILE environment variable in .env.local");
}

// Build absolute path to the SQLite database file
const dbPath = path.resolve(process.cwd(), process.env.DATABASE_FILE);

let db: Database.Database;

export function getDB() {
  if (!db) {
    db = new Database(dbPath);
  }
  return db;
}
